# 对话内容保存提示词

## 目标

将对话中的重要、有价值的内容标准化保存到指定目录（如果未指定则保存到当前目录），只保留有信息量的部分，便于后续查阅和知识积累。

## 自动保存机制

### 触发条件

**以下情况会自动保存**：

- 发现新的技术原理或机制
- 完成复杂问题的深入分析（包含代码、架构、数据流等）
- 提供了系统性的解决方案或最佳实践
- 涉及重要工具的完整使用方法
- 分析了源码或系统内部实现

**不会自动保存**：

- 简单的问答（如"这个命令是什么"）
- 短时间的代码片段展示
- 操作层面的指令（如"帮我删除文件"）
- 已知信息的确认或澄清

### 自动保存时机

- 在完成一个完整的分析或讲解后
- 当对话中形成了结构化的知识体系
- 用户说"明白了"、"清楚了"等表示理解时
- 解决问题并给出完整方案后

## 用户触发命令

用户可以使用以下简单命令触发保存：

- `保存` / `save`：保存当前对话的核心内容
- `保存 [主题]`：保存指定主题的内容
- `保存到 [目录]`：保存到指定目录
- `总结保存`：总结当前对话并保存

## 判断标准

**需要保存**：新知识点、技术方案、重要代码示例、问题排查、最佳实践、工具使用、系统原理

**不需要保存**：闲聊、简单指令、临时问答、重复代码、已知信息

## 文件命名规则

- 英文名称，简洁明了，辨识性强
- 连字符分隔单词（如 `session-storage-analysis.md`）
- 避免中文、拼音、泛泛名称（如 `notes.md`）
- 建议格式：`[主题]-[关键点].md` 或 `[工具/技术]-[方面].md`

**示例**：

- ✅ `opencode-session-storage.md`
- ✅ `git-workflow-best-practices.md`
- ✅ `docker-network-troubleshooting.md`
- ❌ `笔记.md`
- ❌ `some-random-notes.txt`

## 文档格式规范

```markdown
# [主题名称]

## 1. 核心概念/背景

## 2. 主要功能/特性

### 2.1 特性一

## 3. 实现原理

## 4. 使用方法

## 5. 代码示例

## 6. 注意事项

## 7. 最佳实践

## 8. 相关资源

---

## 修改历史

- [日期]: [修改内容]
```

**格式要求**：

- 代码块指定语言类型：`typescript、`bash、```json
- 命令添加注释：```bash # 说明内容
- 树状结构展示目录
- 引用块标注重要信息：> 注意：xxx
- 表格展示对比数据

## 保存流程

1. **识别价值**：判断是否值得保存
2. **确定主题**：提炼核心主题
3. **命名文件**：按命名规则确定文件名
4. **检查文件**：
   - 如果文件已存在，先读取完整内容
   - 判断是否为同一主题
5. **组织内容**：按格式规范组织
6. **保存文件**：
   - 如果是新文件，直接写入
   - 如果文件存在且为同一主题，追加新内容到适当位置
   - **严禁覆盖已有内容**，除非明确需要修改
7. **更新历史**：在文档末尾添加修改历史

## 质量要求

- **准确性**：技术内容准确
- **完整性**：覆盖关键方面
- **可读性**：结构清晰，语言简洁
- **实用性**：可操作的方法和示例
- **时效性**：与当前版本一致

## 注意事项

- 避免保存过于琐碎的内容
- 同一主题内容追加到已有文件
- 相关主题可以引用关联
- 定期整理和更新文档
- **保存时先读取已有内容，增量更新而非覆盖**
- **除非用户明确要求修改或替换，否则只能追加内容**

---

**提示词版本**: 2.1
**最后更新**: 2026-01-19
