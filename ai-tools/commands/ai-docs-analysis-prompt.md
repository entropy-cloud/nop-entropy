# 通用化AI文档检查分析提示词

## 任务目标

仔细验证项目中的AI专用文档，确保文档内容：
1. **面向AI优化**：不包含AI大模型已知的通用知识
2. **清晰详细**：便于AI在花费最少token的情况下理解项目原理和步骤
3. **代码一致性**：基于这些文档能开发出完全符合项目最佳实践的代码
4. **严格符合实际**：文档内容与当前代码实现完全一致

## 核心原则

### 1. 平台创新性原则（Nop 平台特有）

**Nop 平台是一种创新的技术实践**，与传统框架有本质区别。更新文档时必须牢记以下核心差异：

#### 创新架构特性
- **模型驱动架构**：Nop 大量采用模型驱动方案，通过 xmeta 元数据模型定义数据结构和验证规则
- **自研 XML 解析器**：自行涉及并实现 XML 解析器，不依赖第三方库
- **代码生成优先**：大量工作通过代码生成、元编程等方式完成
- **手工代码极大减少**：相比传统 Spring 框架，手工编写的部分极大减少
- **编程范式不同**：编程时的基本做法与传统框架差别很大

#### 与传统 Spring 框架的本质区别

| 特性 | 传统 Spring 框架 | Nop 平台 |
|------|--------------|----------|
| **开发方式** | 手工编写大量 Service/Controller | 代码生成 + 元数据驱动 |
| **参数传递** | 自定义 DTO 对象 | Map/QueryBean 通用类型 |
| **扩展机制** | 继承、AOP | Delta 机制、xpl 脚本语言 |
| **配置方式** | properties/yml 文件 | XML DSL 文件 |
| **ORM 使用** | JPA/Hibernate/MyBatis | 自研 NopORM |
| **事务管理** | @Transactional 注解 | @BizMutation 自动事务（简化版） |
| **服务定义** | @RestController/@Service | @BizModel + xmeta 模型 |

#### ⚠️ 更新文档时的特别注意事项

1. **严禁套用 Spring 模式**：
   - ❌ 不要在 Nop 文档中使用 Spring 的 Controller/Service 注解示例
   - ❌ 不要建议使用 Spring 的 AOP（@Aspect, @Around）模式
   - ❌ 不要使用 Spring 的 @Value 注解（应使用 @InjectValue）
   - ❌ 不要建议使用 Spring 的 @Transactional 详细配置（Nop 的 @BizMutation 更简单）
   - ❌ 不要建议使用 Spring 的 @Component/@Configuration 等组件扫描

2. **必须强调 Nop 特有特性**：
   - ✅ 必须强调 Delta 机制（无代码扩展）
   - ✅ 必须强调 xpl 脚本语言
   - ✅ 必须强调 xmeta 元数据驱动
   - ✅ 必须强调模型驱动的 CRUD（无需编程）
   - ✅ 必须强调 Map/QueryBean 参数（不使用 DTO）
   - ✅ 必须强调内置 CRUD 方法（无需手动实现）

3. **参考 01-core-concepts 中的差异化说明**：
   - `01-core-concepts/nop-vs-traditional.md` - 详细说明 Nop 与传统框架的差异
   - `01-core-concepts/ai-development.md` - AI 开发的特殊要求
   - `01-core-concepts/delta-basics.md` - Delta 扩展机制说明
   - `01-core-concepts/delta-scenarios.md` - Delta 应用场景

4. **编程方式差异**：
   - ❌ 不要建议在 BizModel 中手动实现简单的 CRUD 方法（getUser, createUser 等）
   - ❌ 增删改查逻辑不要使用自定义 DTO 类作为参数，使用Map data和QueryBean query
   - ✅ 必须建议使用内置 CRUD 方法（save, update, delete, findPage 等）
   - ✅ 必须使用 Map/QueryBean 作为参数类型
   - ✅ 必须强调通过修改 xmeta 模型来扩展字段（无需修改代码）

**重要提醒**：Nop 平台的设计理念与传统框架完全不同，文档更新时必须时刻牢记这些差异，避免使用传统框架的经验来编写或修改 Nop 相关的文档。

---

### 2. AI友好性原则
- **避免通用知识**：不重复AI已知的编程语言基础、框架通用概念
- **聚焦项目特色**：重点描述项目的独特设计、核心概念、扩展机制
- **最小token消耗**：使用简洁但完整的描述，避免冗余信息
- **代码导向**：提供可直接使用的代码示例和模式

### 2. 准确性原则
- **源码为基准**：所有描述必须与当前代码实现一致
- **实时验证**：代码示例必须能在当前项目中编译运行
- **避免假设**：不基于传统框架习惯进行推测性描述
- **交叉验证**：所有特性必须基于实际代码验证，避免文档特性

### 3. 实用性原则
- **可操作指导**：提供具体的开发步骤和最佳实践
- **问题解决**：包含常见问题的解决方案
- **扩展指南**：说明如何扩展和定制功能
- **关键特性优先**：只保留最关键的特性，移除不常用或文档中提及但无实际使用的功能

## 检查维度

### 维度1：内容针对性检查
- [ ] **通用知识过滤**：移除AI已知的Java/Spring基础概念
- [ ] **项目特色突出**：重点描述项目的独特架构和设计模式
- [ ] **价值密度**：确保每段内容都提供新的项目相关知识

### 维度2：技术准确性检查
- [ ] **代码示例验证**：逐行验证示例代码与源码一致性
- [ ] **API签名核对**：检查类名、方法名、参数类型是否正确
- [ ] **配置项验证**：确认配置项名称、默认值、使用方式
- [ ] **架构描述准确**：确保模块关系、组件交互描述正确
- [ ] **实际使用验证**：验证特性是否在实际代码中有使用示例

### 维度3：实用价值检查
- [ ] **开发指导性**：是否提供清晰的开发步骤
- [ ] **最佳实践**：是否包含项目特有的最佳实践
- [ ] **问题解决**：是否涵盖常见开发问题的解决方案
- [ ] **扩展指南**：是否说明如何扩展和定制功能
- [ ] **关键特性筛选**：是否只保留最关键的特性，移除不常用功能

### 维度4：结构优化检查
- [ ] **信息组织**：内容是否按逻辑顺序组织
- [ ] **重点突出**：关键概念是否得到充分强调
- [ ] **示例质量**：代码示例是否完整且可运行
- [ ] **交叉引用**：相关概念是否有适当的链接引用（仅限内部链接）

### 维度5：自包含性检查（P0 - 必须满足）
- [ ] **外部链接移除**：所有http://或https://开头的外部链接已移除（XML Schema除外）
- [ ] **文档元信息移除**：所有版本、作者、更新时间等信息已移除
- [ ] **开发环境链接移除**：所有localhost链接已移除
- [ ] **完全自包含**：文档内容完全在docs-for-ai目录内，无需外部依赖

## 执行流程

### 阶段1：文档扫描与分类

1. 扫描所有AI专用文档
2. 按功能模块分类文档
3. 识别核心文档和辅助文档
4. 建立文档依赖关系图

**特别注意**：识别所有套用 Spring/传统框架模式的描述，标记为必须修正。

---

### 阶段2：内容深度分析

1. **逐文档分析**：
    - 识别通用知识内容（标记为可删除）
    - 提取项目特色内容（标记为重点）
    - 验证技术准确性（标记问题）
    - 评估实用价值（标记改进点）
    - **重点检查**：识别所有套用 Spring/传统框架模式的描述

2. **框架差异识别与验证**：
    - 检查是否使用 Spring 的 @Service/@Controller 注解
    - 检查是否建议使用 Spring 的 @Transactional 详细配置
    - 检查是否使用自定义 DTO 类而非 Map/QueryBean
    - 检查是否建议使用 Spring 的 AOP 模式
    - 检查是否遗漏了 Nop 的核心特性（Delta、xmeta、xpl、内置 CRUD 等）
    - 识别所有需要修正的 Spring 模式示例

2. **代码示例验证**：
   - 提取所有代码片段
   - 在源码中搜索对应实现
   - 验证编译和运行可行性
   - 检查API使用正确性

### 阶段3：对比验证

1. **源码对比**：
    - 核对文档描述与源码实现
    - 验证架构图与代码结构
    - 检查配置项与实际配置
    - **重点验证**：检查示例代码是否使用了 Spring 模式而非 Nop 模式

2. **官方文档对比**：
    - 对比AI文档与官方文档差异
    - 以源码为准选择最准确内容
    - 确保AI文档更精炼适合AI阅读
    - **重点强调**：确保文档不套用传统框架经验

### 阶段4：问题识别与建议
1. **问题分类**：
   - P0：严重错误（代码示例错误、架构描述错误）
   - P1：内容问题（描述不准确、过时信息）
   - P2：优化建议（可读性改进、结构优化）

2. **建议生成**：
   - 具体修改建议
   - 替代内容方案
   - 补充内容建议

### 输出要求

### 1. 分析报告格式
```
## 文档分析报告：{文档名称}

### 基本信息
- 文档路径：{路径}
- 文档类型：{核心/辅助/示例}
- 分析时间：{时间}

### 内容评估
#### AI友好性评分：X/10
- 通用知识占比：X%
- 项目特色内容：X%
- 信息密度：评价

#### 技术准确性：X/10
- 代码示例正确性：X/X个
- API描述准确性：X/X处
- 架构描述正确性：评价

#### 实用价值：X/10
- 开发指导性：评价
- 问题解决能力：评价
- 扩展指南完整性：评价

### 详细问题清单
#### P0问题（必须修复）
1. **问题描述**
   - 位置：第X行
   - 问题：具体描述
   - 建议修正：具体建议
   - 源码验证：{验证结果}

#### P1问题（建议修复）
1. **问题描述**
   - 位置：第X行
   - 问题：具体描述
   - 建议修正：具体建议

#### P2建议（优化改进）
1. **改进建议**
   - 位置：第X行
   - 建议：具体改进建议
   - 预期效果：改进后的效果

### 总体建议
- 主要改进方向
- 优先级排序
- 预计工作量评估
```

### 2. 修改建议保存
- 所有发现的问题和建议保存到指定目录
- 按文档分类组织
- 包含具体的修改代码和说明
- 不直接修改原文档，只提供修改建议

## 特殊处理规则

### 1. 通用知识识别规则
以下内容通常被视为AI已知的通用知识，**但需要特别注意 Nop 平台的特有创新**：

- 编程语言基础语法
- 常见设计模式概念
- 基础算法和数据结构
- **通用框架使用模式**：❌ **严禁套用 Spring/传统框架经验**
- 基本的软件开发流程

**特别强调**：
- ❌ Nop 的 BizModel 不等于 Spring 的 @Service
- ❌ Nop 的 @BizMutation 不等于 Spring 的 @Transactional
- ❌ Nop 的 Delta 扩展不等于 Spring 的继承
- ❌ Nop 的 xmeta 不等于 JPA 的 @Entity
- ❌ Nop 的 xpl 不等于 Thymeleaf 模板
- ✅ 必须基于 Nop 源码验证所有描述

### 2. 项目特色内容识别

**重要**：以下内容应重点保留和突出。特别是 Nop 平台与传统 Spring 框架的本质区别，必须在文档更新时牢记！

#### Nop 平台的核心特色（必须牢记）

1. **模型驱动架构（Model-Driven）**：
   - 通过 xmeta 元数据模型定义数据结构和验证规则
   - 代码生成优先，减少手工编码
   - 修改模型后自动适应，无需重新生成 DTO

2. **Delta 扩展机制**：
   - 无需修改源代码即可扩展功能
   - 通过 xpl/xmeta/xbeans XML 配置实现
   - 支持多层次覆盖和组合
   - 热插拔式扩展，不影响升级

3. **自研组件体系**：
   - NopORM：自研 ORM 框架，不依赖 JPA/Hibernate
   - NopXLang：自研的元编程语言
   - NopGraphQL：自研的 GraphQL 引擎
   - NopIoC：自研的 IoC 容器

4. **与 Spring 的核心差异**：
   - 见"平台创新性原则（Nop 平台特有）"章节

---

以下内容应重点保留和突出：

- 项目的独特架构设计
- 自定义的扩展机制
- 特有的配置方式
- 项目特定的最佳实践
- 与其他框架的差异化特性

**Nop 平台的核心特色（必须牢记）**：

1. **模型驱动架构（Model-Driven）**：
   - 通过 xmeta 元数据模型定义数据结构和验证规则
   - 代码生成优先，减少手工编码
   - 修改模型后自动适应，无需重新生成 DTO

2. **Delta 扩展机制**：
   - 无需修改源代码即可扩展功能
   - 通过 xpl/xmeta/xbeans XML 配置实现
   - 支持多层次覆盖和组合
   - 热插拔式扩展，不影响升级

3. **自研组件体系**：
   - NopORM：自研 ORM 框架，不依赖 JPA/Hibernate
   - NopXLang：自研的元编程语言
   - NopGraphQL：自研的 GraphQL 引擎
   - NopIoc：自研的 IoC 容器

4. **与 Spring 的核心差异**：
   - 见"平台创新性原则（Nop 平台特有）"章节

---

### 3. 实际代码验证规则
以下内容必须基于实际代码验证：
- **特性存在性验证**：所有提及的特性必须在源码中有实际使用示例
- **交叉验证方法**：通过搜索工具在核心模块中验证特性使用情况
- **文档特性识别**：识别仅在文档中提及但无实际代码使用的特性
- **使用频率评估**：评估特性在实际项目中的使用频率和重要性

### 4. 关键特性筛选规则

以下原则用于筛选最关键的特性：

- **实际使用优先**：优先保留有实际代码示例的特性
- **核心功能优先**：优先保留项目核心架构相关的特性
- **开发频率优先**：优先保留开发中经常使用的特性
- **移除文档特性**：移除仅在文档中提及但无实际使用的特性

**⚠️ 特别强调：Nop 平台的模型驱动架构特性**

1. **xmeta 元数据模型**（Nop 核心特色）：
   - ✅ 必须保留：xmeta 模型定义方式、配置结构
   - ✅ 必须保留：通过 xmeta 实现字段级验证和类型转换
   - ✅ 必须保留：修改模型后自动适应，无需重新生成代码

2. **内置 CRUD 方法**（Nop 核心特色）：
   - ✅ 必须保留：findPage(), save(), update(), delete() 等内置方法
   - ✅ 必须保留：Map/QueryBean 参数（不使用 DTO）
   - ✅ 必须保留：无需手动实现简单 CRUD
   - ❌ 移除文档中的：手动实现 getUser, createUser 等简单方法示例

3. **Delta 扩展机制**（Nop 核心特色）：
   - ✅ 必须保留：无代码扩展、插拔式设计
   - ✅ 必须保留：xpl 脚本语言示例
   - ✅ 必须保留：xbeans 配置示例

4. **框架差异识别**（必须严格检查）：
   - ❌ **严禁**：套用 Spring 的 @Service/@Controller 模式
   - ❌ **严禁**：建议使用 Spring 的 @Transactional 详细配置
   - ❌ **严禁**：使用 Spring 的 @Value 注解（应用 @InjectValue）
   - ❌ **严禁**：使用 Spring 的 AOP 模式（@Aspect, @Around）
   - ❌ **严禁**：建议使用 Spring 的组件扫描
   - ✅ **必须**：强调 Nop 的 @BizModel/@BizMutation 模式
   - ✅ **必须**：强调 Nop 的简化事务机制

### 2. 代码示例验证标准

- **必须能在当前项目环境中编译**
- **必须使用项目中真实存在的类和方法**
- **必须符合项目的编码规范和习惯**
- **必须包含必要的导入和配置**
- **必须严格遵循 Nop 平台特有模式**：
  - ❌ 不使用 Spring 的 @Service/@Controller
  - ❌ 不使用 Spring 的 @Value（使用 @InjectValue）
  - ❌ 不使用 Spring 的 AOP 模式
  - ✅ 使用 @BizModel/@BizMutation
  - ✅ 使用 Map/QueryBean 参数
  - ✅ 使用内置 CRUD 方法

## 质量保证措施

### 1. 验证检查清单

### 2. docs-for-ai目录自包含要求

**核心原则：docs-for-ai目录必须是完全自包含的文档集合，专为AI助手设计**

#### 自包含性要求（P0 - 必须满足）
- [ ] **禁止外部链接**：所有文档内容必须完全包含在docs-for-ai目录内，**不得引用互联网链接**
  - ❌ 移除所有http://或https://开头的外部链接（XML Schema命名空间除外）
  - ❌ 移除所有指向外部文档、视频教程、示例项目的链接
  - ❌ 移除所有问题反馈渠道链接（GitHub Issues、Gitee Issues等）
  - ✅ XML Schema命名空间可以保留（如http://nop-xlang.github.io/schema/*.xdef）
- [ ] **禁止文档元信息**：文档中不得包含版本、修改人、修改时间等信息
  - ❌ 移除所有"文档版本"、"最后更新"、"作者"、"维护者"、"状态"等信息
  - ❌ 移除所有"文档版本: vX.X"、"最后更新: YYYY-MM-DD"等元数据
  - ❌ 文档必须始终是最新的，不需要版本管理信息
- [ ] **完整上下文**：每个文档必须提供足够的上下文信息，无需依赖外部文档即可理解
- [ ] **独立可读**：任何文档都可以独立阅读和理解，不依赖其他文档的先后顺序
- [ ] **内部链接**：所有引用和链接必须指向docs-for-ai目录内的其他文档
- [ ] **资源内嵌**：必要的图片、图表等资源必须包含在docs-for-ai目录内

#### 内容完整性要求
- [ ] **概念定义**：所有关键概念必须在文档内部或链接文档中明确定义
- [ ] **示例完整**：代码示例必须包含完整的上下文，无需查看其他文件
- [ ] **术语统一**：使用统一的术语体系，避免歧义
- [ ] **依赖说明**：明确说明文档间的依赖关系，但保持内容独立

#### 检查清单
- [ ] 扫描所有文档中的链接，确保没有http://或https://开头的外部链接（XML Schema除外）
- [ ] 验证所有文档末尾没有文档版本、作者、更新时间等元信息
- [ ] 验证所有代码示例的完整性和可运行性
- [ ] 检查是否存在外部依赖的术语或概念
- [ ] 确保每个文档都有完整的导入和上下文说明
- [ ] 验证所有图片和资源的路径正确性

#### 外部链接识别规则（必须移除）
以下链接类型必须移除：
1. 问题反馈渠道：https://github.com/.../issues
2. 外部文档：https://gitee.com/.../docs
3. 视频教程：https://www.bilibili.com/...
4. 示例项目：https://github.com/.../xxx-demo
5. 外部框架文档：https://aisuda.bce.baidu.com/...
6. 开发环境链接：http://localhost:8080/...
7. 外部服务：https://codecov.io/bash
8. 其他任何指向互联网的链接

以下链接类型可以保留：
1. XML Schema命名空间：http://nop-xlang.github.io/schema/*.xdef
2. Maven POM命名空间：http://maven.apache.org/POM/4.0.0
3. W3C XML Schema：http://www.w3.org/2001/XMLSchema-instance
4. 技术必需的命名空间声明

## docs-for-ai目录结构规范

### 目录组织原则
1. **模块化组织**：按功能模块组织文档，每个模块独立完整
2. **层次清晰**：建立清晰的文档层次结构，便于导航
3. **交叉引用**：建立合理的交叉引用机制，但不依赖外部文档
4. **索引完整**：维护完整的文档索引，便于查找

### 文件命名规范
- 使用英文小写字母和连字符
- 文件名应清晰反映文档内容
- 避免使用过于通用的名称
- 保持命名的一致性
- [ ] 所有代码示例都经过源码验证
- [ ] 所有API描述都与源码一致
- [ ] 所有配置项都实际存在
- [ ] 架构描述与代码结构匹配
- [ ] 移除了不必要的通用知识
- [ ] 突出了项目特色内容
- [ ] 提供了实用的开发指导

### 2. 交叉验证机制
- 重要代码示例进行双重验证
- 关键概念描述进行多源核对
- 架构图与实际代码结构对比
- 与官方文档进行一致性检查

## 适用性说明

本提示词适用于各种Java项目的AI文档检查分析，特别是：
- 基于特定框架的定制化项目
- 有独特架构设计的系统
- 需要为AI提供精准开发指导的项目
- 文档需要与代码严格同步的项目

通过本提示词的分析，可以确保AI专用文档既精简又准确，帮助AI大模型高效理解项目特性并生成符合最佳实践的代码。