# Docs-for-AI 文档核对任务

## 任务概述

仔细核对 `docs-for-ai` 目录下的所有文档，确保文档内容与当前源码和 `docs` 目录下的官方文档保持一致。

## 核对原则

### 1. 权威性优先级（从高到低）

1. **当前源码** - 最高优先级
2. **docs/ 目录下的官方文档** - 次高优先级
3. **docs-for-ai/ 目录下的现有文档** - 待核对

**关键规则**：当出现冲突时，**必须以当前源码为准**。

### 2. 文档更新目标

- 确保 `docs-for-ai` 中的文档内容与当前源码实现完全一致
- 确保示例代码与源码匹配，能够实际运行
- 确保API签名、类名、包名、注解使用等与源码一致
- 确保描述与当前架构和实现一致

### 3. 文档性质要求

**重要**：`docs-for-ai` 目录是专门为 **AI大模型阅读** 的文档集合。

- **保持最新版本知识**：文档应该反映当前源码的实际情况
- **无需记录版本历史**：不要在文档中添加版本号、更新日志、修改记录等
- **简化元信息**：尽量减少不必要的元信息，让AI专注于知识内容
- **清晰的描述**：文档应该让AI能够准确理解Nop平台的概念和使用方法

### 4. 不允许的内容

❌ 不要添加：
- 版本号（如 v1.0, v2.0）
- 更新日期（如 2025-01-10）
- 更新日志
- 修改历史
- 作者信息
- Git commit 引用

✅ 应该保留：
- 文档标题
- 概述和核心概念
- 功能描述
- 使用方法
- 示例代码
- 最佳实践
- 常见问题
- 相关文档链接

### 5. 最小变更原则（⚠️ 极重要）

**关键原则：如果没有必要变更文档，就不要变更。**

只有在以下情况下才修改文档：

✅ **必须修改的情况**：
1. **明确错误**：与源码明显不符（类名、方法名、签名错误）
2. **过时内容**：描述已废弃或删除的功能
3. **误导性信息**：可能导致理解错误的描述
4. **代码示例无法运行**：示例代码有语法错误或逻辑错误
5. **关键API变更**：API签名、参数、返回值发生重大变化

❌ **不需要修改的情况**：
1. **风格偏好**：仅仅是风格不同但内容正确
2. **微小的表述差异**：意思相同但表达方式不同
3. **主观判断**：你认为"可以更好"但原文没有问题
4. **重写冲动**：只是为了用自己的方式表达
5. **格式偏好**：轻微的格式差异不影响可读性

⚠️ **不确定时的处理**：
- 如果不确定是否应该修改，优先保持原样
- 标记出"不确定是否需要修改"的问题供人工审核
- 宁可保守，避免过度修改

## 执行步骤（必须列出详细计划）

### Phase 1: 准备工作

1. **扫描文档目录**
   - 列出 `docs-for-ai` 目录下的所有 markdown 文件
   - 列出 `docs` 目录下的相关文档
   - 识别核心文档和辅助文档

2. **建立核对清单**
   - 为每个文档创建核对项
   - 确定需要核对的源码位置
   - 确定需要核对的 docs 目录文档

### Phase 2: 源码验证

1. **代码示例验证**
   - 逐个验证文档中的代码示例
   - 检查类名、方法名、包名是否正确
   - 检查注解使用是否正确
   - 检查方法签名是否匹配
   - 确保示例代码能够编译和运行

2. **API验证**
   - 验证所有API接口定义
   - 验证方法参数和返回值
   - 验证异常处理
   - 验证常量和枚举值

3. **架构验证**
   - 验证模块依赖关系
   - 验证组件交互方式
   - 验证设计模式使用

### Phase 3: 文档内容核对

1. **概念准确性**
   - 确保所有概念描述与源码实现一致
   - 确保术语使用准确
   - 确保架构描述正确

2. **功能描述**
   - 确保功能描述与实际实现一致
   - 确保限制和注意事项准确
   - 确保性能相关描述正确

3. **配置说明**
   - 确保配置项名称正确
   - 确保配置值范围正确
   - 确保配置示例可运行

### Phase 4: 文档更新

⚠️ **重要**：遵循最小变更原则，只在必要时修改文档。

1. **修正错误内容**（仅当发现明确错误时）
   - 根据源码修正描述性错误
   - 根据源码修正代码示例
   - 根据源码修正API签名

2. **补充缺失内容**（仅当内容确实重要且缺失时）
   - 添加源码中存在但文档未提及的功能
   - 补充必要的代码示例
   - 补充常见问题和解决方案

3. **移除过时内容**（仅当内容确实过时且误导时）
   - 删除已废弃的功能描述
   - 删除不准确的性能建议
   - 删除过时的配置说明

4. **清理元信息**（必须执行）
   - 移除版本信息（v1.0, v2.0 等）
   - 移除更新日期
   - 移除更新日志
   - 移除修改历史记录
   - 移除作者信息（除非必要）

5. **保持原文风格**（不修改的内容）
   - 保持原有的表述风格
   - 保持原有的组织结构
   - 不为了"优化"而重写

### Phase 5: 交叉参考验证

1. **验证文档间引用**
   - 确保所有内部链接有效
   - 确保文档间内容一致
   - 更新过时的引用

2. **与 docs/ 目录对比**
   - 对比 docs-for-ai 和 docs 中的相同主题文档
   - 以源码为准，选择最准确的内容
   - 确保 docs-for-ai 的内容更精炼、更适合AI阅读

### Phase 6: 质量检查

1. **完整性检查**
   - 检查所有章节是否完整
   - 检查示例代码是否完整
   - 检查链接是否有效

2. **一致性检查**
   - 检查术语使用是否一致
   - 检查代码风格是否一致
   - 检查格式是否一致

3. **准确性检查**
   - 重新验证关键代码示例
   - 重新验证重要API描述
   - 重新验证架构描述

## 核对重点

### 高优先级核对项

1. **所有代码示例**
   - 逐行验证代码是否与源码一致
   - 验证是否能够实际运行
   - 验证导入语句是否正确

2. **所有API签名**
   - 验证接口定义
   - 验证方法参数和返回值
   - 验证注解使用

3. **所有配置项**
   - 验证配置项名称
   - 验证配置值类型和范围
   - 验证默认值

4. **架构描述**
   - 验证模块关系
   - 验证组件交互
   - 验证设计原则

### 中优先级核对项

1. **最佳实践建议**
   - 验证是否符合源码设计
   - 验证是否有更好的实践

2. **性能相关描述**
   - 验证性能建议是否准确
   - 验证性能数据是否合理

3. **限制和注意事项**
   - 验证限制描述是否准确
   - 验证注意事项是否完整

### 低优先级核对项

1. **示例说明文字**
   - 确保文字描述与代码示例匹配

2. **格式和排版**
   - 确保格式统一

## 输出要求

### 1. 详细计划清单

在开始核对之前，必须输出详细的计划清单，包括：

```
## 核对计划

### 待核对文档列表
- [ ] 文档1路径
- [ ] 文档2路径
- ...

### 需要验证的源码位置
- [ ] 模块1: 包路径 (关键类/方法)
- [ ] 模块2: 包路径 (关键类/方法)
- ...

### 需要参考的 docs/ 目录文档
- [ ] 文档路径
- [ ] 文档路径
- ...

### 核对重点
1. ...
2. ...
3. ...
```

### 2. 核对报告

完成核对后，输出详细的核对报告：

```
## 核对报告

### 核对统计
- 总文档数: X
- 已核对文档: X
- 发现问题: X
- 已修正问题: X

### 问题清单
#### 文档: xxx.md
1. **问题类型**: 描述
   - 原文: ...
   - 修正: ...
   - 原因: 根据源码 XxxClass.yyyMethod() 发现...
   - 状态: ✅ 已修正

#### 文档: yyy.md
2. **问题类型**: 描述
   - ...
   - 状态: ✅ 已修正

### 补充内容
- 新增内容1: ...
- 新增内容2: ...

### 移除内容
- 移除内容1: ...
- 移除内容2: ...
```

### 3. 更新后的文档

直接更新 `docs-for-ai` 目录下的文档文件。

## 特殊注意事项

### 1. 最小变更原则（⚠️ 最高优先级）

**这是最重要的原则，必须严格遵守。**

在核对文档时，始终问自己：

- "原文是错误的吗？" → 不是，保持原样
- "原文会误导读者吗？" → 不会，保持原样
- "原文与源码不符吗？" → 不符，修正
- "我真的需要修改吗？" → 不确定，保持原样并标记

**记住**：完美的文档改进应该是由人工决策的，AI的职责是发现和修正明确错误，而不是"优化"文档。

### 2. AI 友好性原则

- 使用清晰、简洁的语言
- 提供具体的代码示例
- 避免模糊的描述
- 提供完整的上下文信息

### 3. 保持简洁

- 避免冗长的介绍文字
- 直接切入主题
- 示例代码要完整但不冗余

### 4. 优先级处理

如果发现大量问题，按以下优先级处理：

1. **P0 - 严重错误**：代码示例错误、API签名错误、架构描述错误
2. **P1 - 中等错误**：配置项错误、功能描述不准确
3. **P2 - 轻微问题**：格式问题、排版问题、文字描述可优化

优先处理 P0 和 P1 级别的问题。

### 4. 不确定性处理

如果遇到不确定的内容：

1. 优先参考源码
2. 参考 docs/ 目录的官方文档
3. 如果仍有疑问，标记出来供人工审核

## 质量保证

### 自检清单

完成核对后，确保：

- [ ] 所有代码示例都与源码一致
- [ ] 所有API签名都正确
- [ ] 所有配置项都准确
- [ ] 所有架构描述都正确
- [ ] 所有内部链接都有效
- [ ] 没有版本信息
- [ ] 没有更新日期
- [ ] 没有修改历史
- [ ] 内容简洁清晰，适合AI阅读
- [ ] **只修改了明确错误，没有进行不必要的"优化"**

### 代码验证

对于关键代码示例，应该：

1. 检查类是否存在
2. 检查方法是否存在
3. 检查方法签名是否匹配
4. 检查注解使用是否正确
5. 检查参数类型是否正确
6. 检查返回类型是否正确

## 开始执行

**现在开始执行核对任务：**

1. 首先输出详细的计划清单
2. 逐个文档进行核对
3. 输出核对报告
4. 更新文档
