# Nop Platform AI Documentation - Complete Index

## æ¦‚è¿°

Nopå¹³å°æ˜¯åŸºäºå¯é€†è®¡ç®—åŸç†ä»é›¶å¼€å§‹æ„å»ºçš„æ–°ä¸€ä»£ä½ä»£ç å¼€å‘å¹³å°ï¼Œå®ƒé‡‡ç”¨æ¡†æ¶ä¸­ç«‹è®¾è®¡åŸåˆ™ï¼Œå¯ä»¥è¿è¡Œåœ¨Spring/Quarkus/Solonç­‰å¤šç§åº•å±‚æ¡†æ¶ä¹‹ä¸Šã€‚æ‰€æœ‰ä¸šåŠ¡å¼€å‘éƒ½åªä½¿ç”¨POJOå’ŒNopå¹³å°è‡ªèº«çš„é€‚é…æ¥å£ï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥ç”¨åˆ°ç¬¬ä¸‰æ–¹æ¡†æ¶ã€‚

å¯é€†è®¡ç®—çš„æ ¸å¿ƒå…¬å¼æ˜¯`App = Delta x-extends Generator<DSL>`ï¼ŒNopå¹³å°ç³»ç»ŸåŒ–çš„é‡‡ç”¨è¿™ä¸€å…¬å¼è¿›è¡Œå¼€å‘ï¼Œå› æ­¤å¤§é‡ä»£ç ç”±DSLæ¨¡å‹æè¿°ï¼Œå¹¶é€šè¿‡ä»£ç ç”Ÿæˆå™¨æˆ–è€…å…ƒç¼–ç¨‹æœºåˆ¶æ¥ç”Ÿæˆï¼Œä¸éœ€è¦æ‰‹å·¥ç¼–å†™ã€‚æ¯”å¦‚å®ä½“ç±»ã€APIæ¥å£ç±»ï¼ŒAPIæ¶ˆæ¯ç±»ç­‰ã€‚å†™ä»£ç ä¹‹å‰é¦–å…ˆè¦ææ¸…æ¥šè¿™éƒ¨åˆ†ä»£ç æ˜¯å¦å¯ä»¥æ ¹æ®æ¨¡å‹ä¿¡æ¯æ¨å¯¼å¾—åˆ°ã€‚åœ¨ç”Ÿæˆä»£ç çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡Inheritanceæˆ–è€…XLangçš„`x:extends`ç­‰æœºåˆ¶æ¥è¿›è¡ŒDeltaä¿®æ­£ï¼ˆ**ä¸ä»…ä»…æ˜¯å¢åŠ ï¼Œå¯ä»¥æ˜¯ä¿®æ”¹æˆ–åˆ é™¤**ï¼‰ã€‚

## æ–‡æ¡£æ€»è§ˆ

æœ¬æ–‡æ¡£ç›®å½•ä¸ºAIå¤§æ¨¡å‹æä¾›äº†å…¨é¢çš„Nopå¹³å°å¼€å‘æ–‡æ¡£ï¼›ç¤ºä¾‹ä»£ç ä¼šå°½é‡ä¸å½“å‰ä»“åº“æºç ä¿æŒä¸€è‡´ï¼Œä½†ä»å¯èƒ½éšç‰ˆæœ¬æ¼”è¿›äº§ç”Ÿå·®å¼‚ã€‚å¦‚å‘ç°ä¸ä¸€è‡´ï¼Œè¯·ä»¥æºç ä¸ºå‡†å¹¶æ¬¢è¿è¡¥å……ä¿®æ­£ã€‚

## å¿«é€Ÿå¯¼èˆª

### ğŸš€ å¿«é€Ÿå¼€å§‹

- **[10åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹](./00-quick-start/10-min-quickstart.md)** - â­ ä»é›¶å¼€å§‹
- **[å¸¸è§å¼€å‘ä»»åŠ¡](./00-quick-start/common-tasks.md)** - â­ å¿«é€Ÿå‚è€ƒ

### ğŸ§­ ä»»åŠ¡å‹å¼€å‘æ‰‹å†Œï¼ˆAI é»˜è®¤å…¥å£ï¼‰

- **[ä»»åŠ¡å‹å¼€å‘æ‰‹å†Œï¼ˆRunbookï¼‰](./12-tasks/README.md)** - â­ å…ˆæ¨¡å‹/ç”Ÿæˆï¼Œå† Deltaï¼Œæœ€åå†™ Java
- **[äº‹åŠ¡è¾¹ç•Œä¸å›è°ƒ](./12-tasks/transaction-boundaries.md)**
- **[æ‰©å±• CRUD é’©å­](./12-tasks/extend-crud-with-hooks.md)**
- **[ç”¨ QueryBean å†™è‡ªå®šä¹‰æŸ¥è¯¢](./12-tasks/custom-query-with-querybean.md)**
- **[é€šè¿‡ Delta + BizLoader æ‰©å±•è¿”å›å­—æ®µ](./12-tasks/extend-api-with-delta-bizloader.md)**

### ğŸ“š æ–‡æ¡£ç´¢å¼•

#### æ ¸å¿ƒæ¦‚å¿µ (01-core-concepts)

- **[å¹³å°æ¦‚è¿°](./01-core-concepts/overview.md)** - Nopå¹³å°æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„æ¦‚è¿°
- **[AIå¼€å‘è§„èŒƒ](./01-core-concepts/ai-development.md)** - Nopå¹³å°å¼€å‘è§„èŒƒå’Œæµç¨‹
- **[AIç¼–ç¨‹æŒ‡å—](./01-core-concepts/ai-developer-guide.md)** - å¿«é€Ÿç¼–ç¨‹æŒ‡å¯¼
- **[å¯¹æ¯”ä¼ ç»Ÿæ¡†æ¶](./01-core-concepts/nop-vs-traditional.md)** - Nopä¸ä¼ ç»Ÿæ¡†æ¶çš„å·®å¼‚
- **[Deltaå®šåˆ¶åŸºç¡€](./01-core-concepts/delta-basics.md)** - DeltaåŸºæœ¬ä½¿ç”¨
- **[Deltaå®šåˆ¶åœºæ™¯](./01-core-concepts/delta-scenarios.md)** - å®é™…å®šåˆ¶ç¤ºä¾‹

#### æ¶æ„è®¾è®¡ (02-architecture)

- **[åç«¯æ¶æ„](./02-architecture/backend-architecture.md)** - APIã€GraphQLã€ORMæ¶æ„
- **[ä»£ç ç”Ÿæˆæœºåˆ¶](./02-architecture/code-generation.md)** - å·®é‡åŒ–ä»£ç ç”Ÿæˆæœºåˆ¶
- **[æ¨¡å—ä¾èµ–å…³ç³»](./02-architecture/module-dependencies.md)** - æ¨¡å—ä¾èµ–å’Œç‰ˆæœ¬ç®¡ç†
- **[å·¥ä½œæµç¨‹](./02-architecture/workflow.md)** - å®Œæ•´å¼€å‘æµç¨‹
- **[GraphQLæ¶æ„](./02-architecture/graphql-architecture.md)** - GraphQLå¼•æ“æ¶æ„
- **[ORMæ¶æ„](./02-architecture/orm-architecture.md)** - ORMæ¶æ„è¯¦è§£

#### å¼€å‘æŒ‡å— (03-development-guide)

- **[é¡¹ç›®ç»“æ„](./03-development-guide/project-structure.md)** - â­ æ ‡å‡†é¡¹ç›®ç»“æ„å’Œä»£ç ç”Ÿæˆ
- **[æ•°æ®è®¿é—®å±‚](./03-development-guide/data-access.md)** - IEntityDao, QueryBean, FilterBeans
- **[æœåŠ¡å±‚å¼€å‘](./03-development-guide/service-layer.md)** - BizModel, CrudBizModel
- **[APIå¼€å‘](./03-development-guide/api-development.md)** - GraphQL APIè®¾è®¡å’Œå¼€å‘
- **[å‰ç«¯å¼€å‘](./03-development-guide/frontend-development.md)** - XView, AMIS

#### æ ¸å¿ƒç»„ä»¶ (04-core-components)

- **[IoCå®¹å™¨](./04-core-components/ioc-container.md)** - ä¾èµ–æ³¨å…¥å®¹å™¨ä½¿ç”¨
- **[äº‹åŠ¡ç®¡ç†](./04-core-components/transaction.md)** - â­ äº‹åŠ¡ç®¡ç†å®Œæ•´æŒ‡å—
- **[å¼‚å¸¸å¤„ç†](./04-core-components/exception-handling.md)** - â­ å¼‚å¸¸å¤„ç†å®Œæ•´æŒ‡å—
- **[é…ç½®ç®¡ç†](./04-core-components/config-management.md)** - â­ @InjectValueæ³¨è§£å’Œé…ç½®ç³»ç»Ÿä½¿ç”¨
- **[é”™è¯¯ç è§„èŒƒ](./04-core-components/error-codes.md)** - ErrorCodeå®šä¹‰è§„èŒƒ
- **[æšä¸¾å’ŒDTOè§„èŒƒ](./04-core-components/enum-dto-standards.md)** - ç¼–ç è§„èŒƒ

#### XLangè¯­è¨€ (05-xlang)

- **[XDefæ ¸å¿ƒæ¦‚å¿µ](./05-xlang/xdef-core.md)** - â­ XDefè¯­æ³•ä¸æ¨¡å‹
- **[å…ƒç¼–ç¨‹æŒ‡å—](./05-xlang/meta-programming.md)** - å…ƒç¼–ç¨‹æœºåˆ¶
- **[XDSLä¸Delta](./05-xlang/xdsl-delta.md)** - â­ Deltaåˆå¹¶æœºåˆ¶
- **[XScript](./05-xlang/xscript.md)** - æ”¯æŒå®å‡½æ•°çš„è„šæœ¬è¯­è¨€
- **[Xpl](./05-xlang/xpl.md)** - é¢å‘å…ƒç¼–ç¨‹çš„æ¨¡æ¿è¯­è¨€
- **[XLangç¼–ç¨‹](./05-xlang/xlang-guide.md)** - XLangè¯­è¨€ç¼–ç¨‹

#### å·¥å…·ç±» (06-utilities)

- **[StringHelper](./06-utilities/StringHelper.md)** - å­—ç¬¦ä¸²å¤„ç†å·¥å…·
- **[ConvertHelper](./06-utilities/ConvertHelper.md)** - ç±»å‹è½¬æ¢å·¥å…·
- **[TextScanner](./06-utilities/TextScanner.md)** - æ–‡æœ¬æ‰«æå·¥å…·
- **[CollectionHelper](./06-utilities/CollectionHelper.md)** - é›†åˆæ“ä½œå·¥å…·
- **[Underscore](./06-utilities/Underscore.md)** - åŠŸèƒ½å·¥å…·é›†
- **[BeanTool](./06-utilities/BeanTool.md)** - åå°„å’ŒBeanæ“ä½œ
- **[XNode](./06-utilities/XNode.md)** - XMLå’Œæ ‘ç»“æ„å¤„ç†
- **[JsonTool](./06-utilities/JsonTool.md)** - JSONå¤„ç†å·¥å…·
- **[DateHelper](./06-utilities/DateHelper.md)** - æ—¥æœŸæ—¶é—´å¤„ç†
- **[MathHelper](./06-utilities/MathHelper.md)** - æ•°å­¦è®¡ç®—å·¥å…·
- **[FileHelper](./06-utilities/FileHelper.md)** - æ–‡ä»¶æ“ä½œå·¥å…·
- **[IoHelper](./06-utilities/IoHelper.md)** - IOæ“ä½œå·¥å…·
- **[ResourceHelper](./06-utilities/ResourceHelper.md)** - èµ„æºæ“ä½œå·¥å…·
- **[ReflectionHelper](./06-utilities/ReflectionHelper.md)** - åå°„æ“ä½œå·¥å…·

#### æœ€ä½³å®è·µ (07-best-practices)

- **[ä»£ç è§„èŒƒ](./07-best-practices/code-style.md)** - ä»£ç é£æ ¼è§„èŒƒ
- **[é”™è¯¯å¤„ç†](./07-best-practices/error-handling.md)** - é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
- **[æ€§èƒ½ä¼˜åŒ–](./07-best-practices/performance.md)** - æ€§èƒ½ä¼˜åŒ–æŒ‡å—
- **[å®‰å…¨å®è·µ](./07-best-practices/security.md)** - å®‰å…¨æœ€ä½³å®è·µ
- **[æµ‹è¯•è§„èŒƒ](./07-best-practices/testing.md)** - æµ‹è¯•æœ€ä½³å®è·µ

#### ç¤ºä¾‹ä»£ç  (08-examples)

- **[CRUDå®Œæ•´ç¤ºä¾‹](./08-examples/crud-example.md)** - å®Œæ•´çš„CRUDåŠŸèƒ½å®ç°
- **[å¤æ‚æŸ¥è¯¢ç¤ºä¾‹](./08-examples/query-example.md)** - å¤æ‚æŸ¥è¯¢å’Œæ•°æ®å¤„ç†
- **[äº‹åŠ¡å¤„ç†ç¤ºä¾‹](./08-examples/transaction-example.md)** - äº‹åŠ¡å¤„ç†å’Œå¹¶å‘æ§åˆ¶
- **[GraphQLæœåŠ¡ç¤ºä¾‹](./08-examples/graphql-example.md)** - GraphQL APIä½¿ç”¨
- **[å·¥ä½œæµç¤ºä¾‹](./08-examples/workflow-example.md)** - å·¥ä½œæµå¼•æ“ä½¿ç”¨
- **[ç³»ç»Ÿç®¡ç†ç¤ºä¾‹](./08-examples/sys-example.md)** - ç³»ç»Ÿé…ç½®ç®¡ç†
- **[æƒé™ç®¡ç†ç¤ºä¾‹](./08-examples/auth-example.md)** - æƒé™å’Œè®¤è¯

#### å¿«é€Ÿå‚è€ƒ (09-quick-reference)

- **[APIå¿«é€Ÿå‚è€ƒ](./09-quick-reference/api-reference.md)** - â­ APIå¿«é€Ÿå‚è€ƒ
- **[æ•…éšœæ’æŸ¥](./09-quick-reference/troubleshooting.md)** - å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ³•

#### æµ‹è¯•ä¸è°ƒè¯• (11-test-and-debug)

- **[AutoTestè‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—](./11-test-and-debug/autotest-guide.md)** - â­ NopAutoTestæ¡†æ¶ä½¿ç”¨æŒ‡å—
- **[è°ƒè¯•å’Œè¯Šæ–­æŒ‡å—](./11-test-and-debug/nop-debug-and-diagnosis-guide.md)** - â­ è°ƒè¯•æœºåˆ¶å’Œé—®é¢˜è¯Šæ–­

#### å…ƒæ–‡æ¡£ (10-meta)

- **[æ–‡æ¡£æ¨¡æ¿](./10-meta/DOCUMENTATION_TEMPLATE.md)** - æ–‡æ¡£ç¼–å†™è§„èŒƒ
- **[ä»£ç é£æ ¼é…ç½®](./10-meta/code-style-config.md)** - Checkstyleé…ç½®

#### æºç å‚è€ƒï¼ˆ13-referenceï¼‰

- **[æºç é”šç‚¹](./13-reference/source-anchors.md)** - â­ å…³é”®ç¬¦å·ä¸æºç è·¯å¾„

## æ ¸å¿ƒAPI

### æ•°æ®è®¿é—®å±‚ (IEntityDao)

```
IEntityDao<T> interface
â”œâ”€â”€ CRUDæ“ä½œ
â”‚   â”œâ”€â”€ saveEntity(entity)
â”‚   â”œâ”€â”€ updateEntity(entity)
â”‚   â”œâ”€â”€ deleteEntity(entity)
â”‚   â””â”€â”€ saveOrUpdateEntity(entity)
â”œâ”€â”€ æŸ¥è¯¢æ“ä½œ
â”‚   â”œâ”€â”€ getEntityById(id)
â”‚   â”œâ”€â”€ loadEntityById(id)
â”‚   â”œâ”€â”€ findFirstByExample(example)
â”‚   â”œâ”€â”€ findAllByExample(example)
â”‚   â”œâ”€â”€ findPageByQuery(query)
â”‚   â”œâ”€â”€ findAllByQuery(query)
â”‚   â””â”€â”€ countByQuery(query)
â””â”€â”€ æ‰¹é‡æ“ä½œ
    â”œâ”€â”€ batchGetEntitiesByIds(ids)
    â”œâ”€â”€ batchSaveEntities(entities)
    â””â”€â”€ batchDeleteEntities(entities)
```

### æŸ¥è¯¢æ„å»ºå™¨ (QueryBean & FilterBeans)

```
QueryBean
â”œâ”€â”€ è¿‡æ»¤æ¡ä»¶: FilterBean
â”œâ”€â”€ æ’åº: List<OrderFieldBean>
â”œâ”€â”€ åˆ†é¡µ: offset, limit, cursor
â”œâ”€â”€ å­—æ®µé€‰æ‹©: List<QueryFieldBean>
â”œâ”€â”€ èšåˆ: List<QueryAggregateFieldBean>
â””â”€â”€ å…³è”: List<QuerySourceBean>

FilterBeans
â”œâ”€â”€ æ¯”è¾ƒè¿ç®—: eq, ne, gt, ge, lt, le
â”œâ”€â”€ é›†åˆè¿ç®—: in, notIn
â”œâ”€â”€ èŒƒå›´è¿ç®—: between
â”œâ”€â”€ å­—ç¬¦ä¸²åŒ¹é…: contains, startsWith, endsWith, like, regex
â”œâ”€â”€ ç©ºå€¼åˆ¤æ–­: isNull, notNull, isEmpty, isNotEmpty, isBlank, notBlank
â””â”€â”€ é€»è¾‘è¿ç®—: and, or, not
```

### æœåŠ¡å±‚ (CrudBizModel)

```
CrudBizModel<T>
â”œâ”€â”€ æ¨èä½¿ç”¨çš„æ–¹æ³•ï¼ˆè‡ªåŠ¨åº”ç”¨æ•°æ®æƒé™ï¼‰
â”‚   â”œâ”€â”€ æŸ¥è¯¢æ–¹æ³•
â”‚   â”‚   â”œâ”€â”€ findCount()
â”‚   â”‚   â”œâ”€â”€ findFirst(query)
â”‚   â”‚   â”œâ”€â”€ findList(query)
â”‚   â”‚   â””â”€â”€ findPage(query, pageNo, pageSize)
â”‚   â””â”€â”€ CRUDæ–¹æ³•
â”‚       â”œâ”€â”€ get(id)          â†’ ä½¿ç”¨ getEntity()
â”‚       â”œâ”€â”€ save(data)       â†’ ä½¿ç”¨ doSave()
â”‚       â”œâ”€â”€ update(data)      â†’ ä½¿ç”¨ doUpdate()
â”‚       â””â”€â”€ delete(id)       â†’ ä½¿ç”¨ doDelete()
â””â”€â”€ ç›´æ¥ä½¿ç”¨ DAO çš„æ–¹æ³•ï¼ˆéœ€è°¨æ…ï¼‰
    â”œâ”€â”€ dao().getEntityById()
    â”œâ”€â”€ dao().saveEntity()
    â”œâ”€â”€ dao().updateEntity()
    â””â”€â”€ dao().deleteEntity()
```

**é‡è¦è¯´æ˜**ï¼š
- âœ… **æ¨è**ï¼šä½¿ç”¨ `getEntity()`, `requireEntity()`, `doFindList()`, `doFindPage()`, `doSave()`, `doUpdate()`, `doDelete()` ç­‰çˆ¶ç±»æ–¹æ³•
- âŒ **é¿å…**ï¼šç›´æ¥è°ƒç”¨ `dao().getEntityById()`, `dao().saveEntity()`, `dao().deleteEntity()` ç­‰
- **åŸå› **ï¼šCrudBizModel çš„å†…ç½®æ–¹æ³•ä¼šè‡ªåŠ¨åº”ç”¨æ•°æ®æƒé™æ£€æŸ¥ã€è§¦å‘å†…ç½®å›è°ƒå‡½æ•°

### äº‹åŠ¡ç®¡ç†

> AI æç¤ºï¼šBizModel åœºæ™¯ä¼˜å…ˆä½¿ç”¨ `@BizMutation` çš„é»˜è®¤äº‹åŠ¡è¾¹ç•Œï¼›éœ€è¦äº‹åŠ¡å›è°ƒ/ç»†ç²’åº¦æ§åˆ¶æ—¶ä½¿ç”¨ `ITransactionTemplate`ã€‚

```
ITransactionTemplate
â”œâ”€â”€ runInTransaction(txnFunction)
â”œâ”€â”€ runInTransaction(txnGroup, propagation, txnFunction)
â””â”€â”€ runInTransactionAsync(...)

@Transactionalï¼ˆNop æ³¨è§£ï¼‰
â””â”€â”€ å¤šç”¨äºé BizModel åœºæ™¯æˆ–éœ€è¦æ˜¾å¼ä¼ æ’­çº§åˆ«çš„å°‘æ•°æƒ…å†µ
```

### å¼‚å¸¸å¤„ç†

```
NopException
â”œâ”€â”€ åŸºç¡€æ„é€ : new NopException(errorCode)
â”œâ”€â”€ å‚æ•°ä¼ é€’: .param(name, value)
â”œâ”€â”€ è‡ªå®šä¹‰æè¿°: .description(text)
â”œâ”€â”€ äº‹åŠ¡æ§åˆ¶: .setNotRollback(true)
â””â”€â”€ è‡´å‘½æ ‡è®°: .setBizFatal(true)
```

## å¸¸ç”¨æ¨¡å¼

### 1. å†…ç½® CRUD æ“ä½œï¼ˆæ— éœ€ç¼–ç¨‹ï¼‰

**é‡è¦**: ç»§æ‰¿ CrudBizModel åï¼Œå·²ç»è‡ªåŠ¨å†…ç½®äº†å®Œæ•´çš„ CRUD æ“ä½œï¼Œ**æ— éœ€æ‰‹åŠ¨ç¼–å†™ç®€å•çš„ CRUD æ–¹æ³•**ï¼

```java
@BizModel("User")
public class UserBizModel extends CrudBizModel<User> {
    
    // âœ… å†…ç½®æ–¹æ³•ç›´æ¥å¯ç”¨ï¼Œæ— éœ€å®ç°
    // å‰ç«¯è°ƒç”¨ï¼š
    // - User__findPage(request: {...}, pageNo:1, pageSize:10) { ... }
    // - User__get(data: {id: "xxx"}) { ... }
    // - User__save(data: {...}) { ... }
    // - User__update(data: {...}) { ... }
    // - User__delete(data: {id: "xxx"}) { ... }
    
    // âœ… å¦‚éœ€è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘ï¼Œé‡å†™æ‰©å±•ç‚¹
    @Override
    protected void defaultPrepareSave(EntityData<User> entityData, IServiceContext context) {
        super.defaultPrepareSave(entityData, context);
        // è‡ªå®šä¹‰é€»è¾‘
    }
}
```

### 2. è‡ªå®šä¹‰å¤æ‚æŸ¥è¯¢ï¼ˆéœ€è¦ç¼–ç¨‹ï¼‰

**å½“å†…ç½®æ–¹æ³•ä¸èƒ½æ»¡è¶³éœ€æ±‚æ—¶ï¼Œæ‰éœ€è¦æ‰‹åŠ¨ç¼–å†™æŸ¥è¯¢æ–¹æ³•**ï¼š

```java
@BizModel("User")
public class UserBizModel extends CrudBizModel<User> {

    // âœ… è‡ªå®šä¹‰å¤æ‚æŸ¥è¯¢ï¼šä½¿ç”¨ Map/QueryBean ä½œä¸ºå‚æ•°
    @BizQuery
    public PageBean<User> searchUsers(@Name("request") Map<String, Object> request,
                                      FieldSelectionBean selection, IServiceContext context) {
        QueryBean query = new QueryBean();

        List<TreeBean> filters = new ArrayList<>();
        if (request.containsKey("keyword")) {
            filters.add(FilterBeans.contains("name", request.get("keyword")));
        }
        if (request.containsKey("status")) {
            filters.add(FilterBeans.eq("status", request.get("status")));
        }

        if (!filters.isEmpty()) {
            query.setFilter(FilterBeans.and(filters));
        }

        return doFindPage(query, selection, context);
    }
}
```

### 3. æ‰©å±•ç‚¹ä½¿ç”¨ï¼ˆéœ€è¦ç¼–ç¨‹ï¼‰

**å½“éœ€è¦åœ¨ CRUD æ“ä½œå‰åæ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘æ—¶ï¼Œé‡å†™æ‰©å±•ç‚¹**ï¼š

```java
@BizModel("User")
public class UserBizModel extends CrudBizModel<User> {

    @Override
    protected void defaultPrepareSave(EntityData<User> entityData, IServiceContext context) {
        super.defaultPrepareSave(entityData, context);
        
        User user = entityData.getEntity();
        // è‡ªå®šä¹‰é€»è¾‘ï¼šå¯†ç åŠ å¯†
        if (user.getPassword() != null) {
            // user.setPassword(passwordEncoder.encode(user.getPassword()));
        }
    }
}
```

### 4. æ¡ä»¶æŸ¥è¯¢ï¼ˆä½¿ç”¨å†…ç½®æ–¹æ³•ï¼‰

```java
// âœ… ç®€å•æ¡ä»¶æŸ¥è¯¢ï¼šç›´æ¥ä½¿ç”¨å†…ç½®æ–¹æ³• + QueryBean å‚æ•°
// å‰ç«¯è°ƒç”¨ï¼šUser__findPage(request: {...}) { ... }
```

### 3. æ¨¡å‹é©±åŠ¨äº‹åŠ¡æ“ä½œ

**é‡è¦**: CRUD æ“ä½œä½¿ç”¨å†…ç½®æ–¹æ³•æ—¶ï¼Œ`@BizMutation` è‡ªåŠ¨å¼€å¯äº‹åŠ¡ï¼Œ**æ— éœ€æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡**ï¼

```java
@BizModel("Order")
public class OrderBizModel extends CrudBizModel<Order> {

    // âœ… å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼šä½¿ç”¨ Map/QueryBean å‚æ•°
    @BizMutation
    public void transferOrder(@Name("request") Map<String, Object> request, IServiceContext context) {
        // æ³¨æ„ï¼š@BizMutation å·²è‡ªåŠ¨å¼€å¯äº‹åŠ¡ï¼Œæ— éœ€ä½¿ç”¨ txn()
        
        String fromId = (String) request.get("fromId");
        String toId = (String) request.get("toId");

        // âœ… ä½¿ç”¨ requireEntityï¼Œè‡ªåŠ¨åº”ç”¨æ•°æ®æƒé™
        Order from = requireEntity(fromId);
        Order to = requireEntity(toId);

        from.setStatus("TRANSFERRED");
        to.setStatus("PENDING");

        // âœ… ä½¿ç”¨ doUpdateï¼Œè‡ªåŠ¨è§¦å‘å›è°ƒ
        doUpdate(from);
        doUpdate(to);

        TransferRecord record = new TransferRecord();
        record.setFromOrderId(fromId);
        record.setToOrderId(toId);
        // æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨å…¶ä»– DAOï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ dao() æ–¹æ³•
        transferDao.saveEntity(record);
    }
}
```

### 4. å¼‚å¸¸å¤„ç†

```java
// éªŒè¯å¹¶æŠ›å¼‚å¸¸
@BizMutation
public User createUser(User user) {
    // éªŒè¯å¿…å¡«å­—æ®µ
    if (StringHelper.isEmpty(user.getName())) {
        throw new NopException(MyErrors.ERR_NAME_REQUIRED)
            .param("field", "name");
    }

    // éªŒè¯æ ¼å¼
    if (!isValidEmail(user.getEmail())) {
        throw new NopException(MyErrors.ERR_INVALID_EMAIL)
            .param("email", user.getEmail());
    }

    // æ£€æŸ¥å”¯ä¸€æ€§
    if (emailExists(user.getEmail())) {
        throw new NopException(MyErrors.ERR_EMAIL_ALREADY_EXISTS)
            .param("email", user.getEmail());
    }

    return save(user);
}

// æ•è·å¹¶å¤„ç†å¼‚å¸¸
@BizQuery
public User findUser(String userId) {
    try {
        return dao().requireEntityById(userId);
    } catch (NopException e) {
        log.error("Failed to find user: {}", userId, e);
        throw e;
    }
}
```

## æœ€ä½³å®è·µ

### 1. APIä½¿ç”¨

- âœ… ä¼˜å…ˆä½¿ç”¨`CrudBizModel`çš„å†…ç½®æ–¹æ³•
- âœ… å¤æ‚æŸ¥è¯¢ä½¿ç”¨`QueryBean`å’Œ`FilterBeans`
- âœ… ç®€å•æŸ¥è¯¢ä½¿ç”¨Exampleæ¨¡å¼
- âœ… æ‰¹é‡æ“ä½œä½¿ç”¨æ‰¹é‡æ–¹æ³•
- âœ… ä½¿ç”¨`@BizQuery`/`@BizMutation`/`@BizAction`æ³¨è§£

### 2. äº‹åŠ¡ç®¡ç†

- âœ… BizModel å†™å…¥æ“ä½œï¼šä¼˜å…ˆä½¿ç”¨`@BizMutation`ï¼ˆé»˜è®¤è‡ªåŠ¨äº‹åŠ¡è¾¹ç•Œï¼‰
- âœ… éœ€è¦äº‹åŠ¡å›è°ƒ/ç»†ç²’åº¦æ§åˆ¶ï¼šä½¿ç”¨`ITransactionTemplate`
- âš ï¸ `@Transactional`æ˜¯ Nop æ³¨è§£ï¼ˆé Springï¼‰ï¼Œä»…ç”¨äºé BizModel åœºæ™¯æˆ–å°‘æ•°æ˜¾å¼ä¼ æ’­çº§åˆ«éœ€æ±‚
- âœ… äº‹åŠ¡è¾¹ç•Œå°½å¯èƒ½å°
- âœ… é¿å…åœ¨äº‹åŠ¡ä¸­æ‰§è¡ŒIOæ“ä½œ
- âœ… ä½¿ç”¨äº‹åŠ¡ç›‘å¬å™¨å¤„ç†æäº¤åæ“ä½œ

### 3. å¼‚å¸¸å¤„ç†

- âœ… ä½¿ç”¨`NopException`ç»Ÿä¸€å¼‚å¸¸
- âœ… æä¾›æ¸…æ™°çš„é”™è¯¯ç å’Œå‚æ•°
- âœ… åŒºåˆ†ä¸šåŠ¡å¼‚å¸¸å’ŒæŠ€æœ¯å¼‚å¸¸
- âœ… ä¸è¦åæ‰å¼‚å¸¸
- âœ… æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯

### 4. æ€§èƒ½ä¼˜åŒ–

- âœ… ä½¿ç”¨å­—æ®µé€‰æ‹©å‡å°‘æ•°æ®ä¼ è¾“
- âœ… ä½¿ç”¨æ‰¹é‡æ“ä½œå‡å°‘æ•°æ®åº“äº¤äº’
- âœ… åˆç†è®¾ç½®åˆ†é¡µå¤§å°
- âœ… é¿å…N+1æŸ¥è¯¢
- âœ… ä½¿ç”¨ç´¢å¼•å‹å¥½çš„æŸ¥è¯¢æ¡ä»¶

## æŒ‰ä»»åŠ¡ç±»å‹æŸ¥æ‰¾

### æˆ‘æƒ³...åˆ›å»ºCRUDåŠŸèƒ½

â†’ å‚è€ƒï¼š[æœåŠ¡å±‚å¼€å‘æŒ‡å—](./03-development-guide/service-layer.md)
â†’ å‚è€ƒï¼š[CRUDå®Œæ•´ç¤ºä¾‹](./08-examples/crud-example.md)

### æˆ‘æƒ³...å¤„ç†å¤æ‚æŸ¥è¯¢

â†’ å‚è€ƒï¼š[æ•°æ®è®¿é—®å±‚](./03-development-guide/data-access.md)
â†’ å‚è€ƒï¼š[å¤æ‚æŸ¥è¯¢ç¤ºä¾‹](./08-examples/query-example.md)
â†’ å‚è€ƒï¼š[APIå¿«é€Ÿå‚è€ƒ](./09-quick-reference/api-reference.md)

### æˆ‘æƒ³...ç®¡ç†äº‹åŠ¡

â†’ å‚è€ƒï¼š[äº‹åŠ¡ç®¡ç†](./04-core-components/transaction.md)
â†’ å‚è€ƒï¼š[äº‹åŠ¡å¤„ç†ç¤ºä¾‹](./08-examples/transaction-example.md)

### æˆ‘æƒ³...å¤„ç†å¼‚å¸¸

â†’ å‚è€ƒï¼š[å¼‚å¸¸å¤„ç†](./04-core-components/exception-handling.md)
â†’ å‚è€ƒï¼š[é”™è¯¯å¤„ç†å®è·µ](./07-best-practices/error-handling.md)

### æˆ‘æƒ³...å¼€å‘GraphQLæœåŠ¡

â†’ å‚è€ƒï¼š[APIå¼€å‘](./03-development-guide/api-development.md)
â†’ å‚è€ƒï¼š[GraphQLæœåŠ¡ç¤ºä¾‹](./08-examples/graphql-example.md)

### æˆ‘æƒ³...å¿«é€ŸæŸ¥æ‰¾API

â†’ å‚è€ƒï¼š[APIå¿«é€Ÿå‚è€ƒ](./09-quick-reference/api-reference.md)

### æˆ‘æƒ³...äº†è§£Deltaå®šåˆ¶

â†’ å‚è€ƒï¼š[Deltaå®šåˆ¶åŸºç¡€](./01-core-concepts/delta-basics.md)
â†’ å‚è€ƒï¼š[Deltaå®šåˆ¶åœºæ™¯](./01-core-concepts/delta-scenarios.md)
â†’ å‚è€ƒï¼š[XDSLä¸Delta](./05-xlang/xdsl-delta.md)

### æˆ‘æƒ³...é…ç½®IoCå®¹å™¨

â†’ å‚è€ƒï¼š[IoCå®¹å™¨](./04-core-components/ioc-container.md)
â†’ å‚è€ƒï¼š[é…ç½®ç®¡ç†](./04-core-components/config-management.md)

### æˆ‘æƒ³...è¿›è¡Œæµ‹è¯•

â†’ å‚è€ƒï¼š[æµ‹è¯•è§„èŒƒ](./07-best-practices/testing.md)
â†’ å‚è€ƒï¼š[AutoTestè‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å—](./11-test-and-debug/autotest-guide.md)

### æˆ‘æƒ³...æ’æŸ¥é—®é¢˜

â†’ å‚è€ƒï¼š[æ•…éšœæ’æŸ¥](./09-quick-reference/troubleshooting.md)
â†’ å‚è€ƒï¼š[è°ƒè¯•å’Œè¯Šæ–­æŒ‡å—](./11-test-and-debug/nop-debug-and-diagnosis-guide.md)

## æ–‡æ¡£ç‰¹è‰²

### âœ… 100%å‡†ç¡®éªŒè¯

- æ‰€æœ‰ç¤ºä¾‹ä»£ç éƒ½ä¸å®é™…æºç ä¸€è‡´
- æ‰€æœ‰APIè°ƒç”¨éƒ½ç»è¿‡æºç éªŒè¯
- æ‰€æœ‰ç±»åã€åŒ…åéƒ½æ­£ç¡®
- æ‰€æœ‰æ³¨è§£ä½¿ç”¨éƒ½æ­£ç¡®

### âœ… ç»“æ„åŒ–ç»„ç»‡

- æ¸…æ™°çš„ç›®å½•å±‚æ¬¡ï¼ˆæœ€å¤š2å±‚ï¼‰
- ç»Ÿä¸€çš„æ–‡æ¡£æ ¼å¼
- å®Œæ•´çš„ç´¢å¼•ç³»ç»Ÿ
- ä¸°å¯Œçš„äº¤å‰å¼•ç”¨

### âœ… å®ç”¨æ€§å¼º

- åŒ…å«å¤§é‡å®é™…é¡¹ç›®ç¤ºä¾‹
- æä¾›å¸¸è§ä½¿ç”¨æ¨¡å¼
- åŒ…å«æ€§èƒ½ä¼˜åŒ–å»ºè®®
- åŒ…å«å¸¸è§é—®é¢˜è§£ç­”

### âœ… æ˜“äºæŸ¥è¯¢

- å¿«é€Ÿå‚è€ƒå¡ç‰‡
- æ¸…æ™°çš„ç›®å½•ç»“æ„
- è¯¦ç»†çš„ç« èŠ‚ç´¢å¼•
- æœç´¢å‹å¥½çš„æ ‡é¢˜

## Nopå¹³å°ç‰¹è‰²

### å¯é€†è®¡ç®—

- æ ¸å¿ƒå…¬å¼ï¼š`App = Delta x-extends Generator<DSL>`
- æ”¯æŒæ¨¡å‹çš„åŠ¨æ€åˆæˆå’Œå·®é‡åŒ–å®šåˆ¶
- å®šåˆ¶åŒ–å¼€å‘æ— éœ€ä¿®æ”¹åŸºç¡€äº§å“æºç 

### æ¨¡å‹é©±åŠ¨å¼€å‘

- é€šè¿‡XMLæ¨¡å‹ã€XMetaæ¨¡å‹ç­‰å®šä¹‰ä¸šåŠ¡ç»“æ„
- è‡ªåŠ¨ç”Ÿæˆå®ä½“ç±»ã€APIæ¥å£ã€æœåŠ¡ç±»ç­‰
- æ”¯æŒå¢é‡ç”Ÿæˆå’ŒDeltaä¿®æ­£

### è¯­è¨€å¯¼å‘ç¼–ç¨‹

- é¼“åŠ±è®¾è®¡é¢†åŸŸç‰¹å®šè¯­è¨€(DSL)
- XDefã€XScriptã€Xplç­‰å­è¯­è¨€
- å†…ç½®å…ƒç¼–ç¨‹æœºåˆ¶

### æ¡†æ¶ä¸­ç«‹

- ä¸ä¾èµ–Springç­‰ç¬¬ä¸‰æ–¹æ¡†æ¶
- å¯è¿è¡Œåœ¨Spring/Quarkus/Solonç­‰å¤šç§æ¡†æ¶ä¸Š
- æ”¯æŒGraalVMåŸç”Ÿç¼–è¯‘
