<?xml version="1.0" encoding="UTF-8" ?>
<orm ext:registerShortName="true" ext:appName="app-sample" ext:entityPackageName="io.app.sample.dao.entity"
     ext:basePackageName="io.app.sample" ext:mavenGroupId="io.github.entropy-cloud" ext:mavenArtifactId="app-sample"
     ext:mavenVersion="2.0.0-SNAPSHOT" ext:platformVersion="2.0.0-SNAPSHOT" ext:dialect="mysql,oracle,postgresql"
	 ext:useStdFields="true"
     x:schema="/nop/schema/orm/orm.xdef" xmlns:x="/nop/schema/xdsl.xdef" >

    <domains>
        <domain name="userName" precision="50" stdSqlType="VARCHAR"/>
        <domain name="image" precision="100" stdDomain="file" stdSqlType="VARCHAR"/>
        <domain name="email" precision="100" stdSqlType="VARCHAR"/>
        <domain name="phone" precision="100" stdSqlType="VARCHAR"/>
        <domain name="roleId" precision="100" stdSqlType="VARCHAR"/>
        <domain name="userId" precision="50" stdSqlType="VARCHAR"/>
        <domain name="deptId" precision="50" stdSqlType="VARCHAR"/>
        <domain name="boolFlag" stdSqlType="TINYINT"/>
        <domain name="xml-4k" precision="4000" stdSqlType="VARCHAR"/>
        <domain name="json-1000" precision="1000" stdDomain="json" stdSqlType="VARCHAR"/>
        <domain name="remark" precision="1000" stdSqlType="VARCHAR"/>
        <domain name="version" stdSqlType="INTEGER"/>
        <domain name="createTime" stdSqlType="TIMESTAMP"/>
        <domain name="createdBy" precision="50" stdSqlType="VARCHAR"/>
        <domain name="updateTime" stdSqlType="TIMESTAMP"/>
        <domain name="updatedBy" precision="50" stdSqlType="VARCHAR"/>
        <domain name="delFlag" stdDomain="boolFlag" stdSqlType="TINYINT"/>
        <domain name="roleIds" precision="250" stdSqlType="VARCHAR"/>
        <domain name="file" precision="100" stdDomain="file" stdSqlType="VARCHAR"/>
        <domain name="file-list" precision="500" stdDomain="file-list" stdSqlType="VARCHAR"/>
    </domains>

    <entities>
        <entity displayName="用户" name="io.app.sample.dao.entity.AppSampleUser" tableName="app_sample_user" >
            <columns>
                <column code="USER_ID" displayName="用户ID" domain="userId" mandatory="true" name="userId" precision="50"
                        primary="true" propId="1" stdSqlType="VARCHAR" tagSet="seq" ui:show="X"/>
                <column code="USER_NAME" displayName="用户名" domain="userName" mandatory="true" name="userName"
                        precision="50" propId="2" stdSqlType="VARCHAR" tagSet="disp" ui:show="C"/>
                <column code="PASSWORD" displayName="密码" mandatory="true" name="password" precision="80" propId="3"
                         stdSqlType="VARCHAR" tagSet="masked,var,not-pub" ui:show="X"/>
                <column code="DEPT_ID" displayName="所属部门" domain="deptId" name="deptId" precision="50" propId="6"
                        stdDataType="string" stdSqlType="VARCHAR"/>
                <column code="STATUS" displayName="用户状态" mandatory="true" name="status" propId="7" stdDataType="int"
                        stdSqlType="INTEGER" ext:dict="app-sample/user-status"/>
            </columns>
            <relations>
                <to-one displayName="部门" name="dept" refDisplayName="部门用户"
                        refEntityName="io.app.sample.dao.entity.AppSampleDept" refPropName="deptUsers" tagSet="pub">
                    <join>
                        <on leftProp="deptId" rightProp="deptId"/>
                    </join>
                </to-one>
                <to-many displayName="角色映射" name="roleMappings"
                         refEntityName="io.app.sample.dao.entity.AppSampleUserRole" refPropName="user"
                         tagSet="pub,cascade-delete,insertable,updatable">
                    <join>
                        <on leftProp="userId" rightProp="userId"/>
                    </join>
                </to-many>
            </relations>
            <unique-keys>
                <unique-key columns="userName" constraint="UK_APP_SAMPLE_USER_NAME" name="userNameKey"/>
            </unique-keys>
        </entity>
    </entities>
</orm>
